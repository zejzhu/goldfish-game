<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
  </head>

  <body>
    <script>
      document.addEventListener("keydown", function (event) {
        //if click h and textbox has not gone away yet, close & trigger end
        if (event.key === "h") {
          document.getElementById("lake-scene").style.display = "none";
          document.getElementById("escape-scene").style.display = "block";
        }
      });
      AFRAME.registerComponent("rotation-reader", {
        tick: (function () {
          var position = new THREE.Vector3();
          var quaternion = new THREE.Quaternion();

          return function () {
            this.el.object3D.getWorldPosition(position);
            this.el.object3D.getWorldQuaternion(quaternion);
            // position and rotation now contain vector and quaternion in world space.
          };
        })(),
      });
    </script>

    <a-scene id="escape-scene" style="display: none">
      <a-entity>
        <a-sky>
          <a-sphere
            radius="70"
            position="0 25 0"
            rotation="0 90 0"
            src="#sky-limbo"
            material="side: double; shader:flat;"
          >
          </a-sphere>

          <a-plane
            position="0 5 -30"
            rotation="0 180 0"
            height="32"
            width="45"
            opacity="1"
          >
            <!--change src to #death-algae, #death-kelp as needed-->
            <a-image
              src="#escaped"
              height="32"
              width="45"
              position="0 0 0.2"
            ></a-image>
          </a-plane>
        </a-sky>
      </a-entity>

      <a-assets>
        <img id="sky-limbo" src="sky-limbo.png" />
        <img id="death-algae" src="Assets/deathalgae.png" />
        <img id="death-kelp" src="Assets/deathkelp.png" />
        <img id="escaped" src="Assets/escaped.png" />
      </a-assets>

      <!-- Camera -->
      <a-entity
        id="main-camera"
        camera
        look-controls
        position="0 1.6 0"
        rotation-reader
        >\
        <a-cursor color="white" position="0 0 -1"></a-cursor>
      </a-entity>
    </a-scene>
  </body>
</html>
